<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>BrobyVets</title><link rel="stylesheet" href="sidebar.css"></head>
<body>
<div id="brobyvets-sidebar">
<div class="sidebar-header">
<div class="logo">
<svg width="40" height="40" viewBox="0 0 512 512">
<path d="M80 175C80 125 125 80 175 80C190 80 200 90 200 105C200 120 190 130 175 130C150 130 150 130 150 155C150 180 150 180 175 180C190 180 200 190 200 205C200 220 190 230 175 230C125 230 80 185 80 175Z" fill="#1FC7CA"/>
<path d="M305 175C305 125 350 80 400 80C415 80 425 90 425 105C425 120 415 130 400 130C375 130 375 130 375 155C375 180 375 180 400 180C415 180 425 190 425 205C425 220 415 230 400 230C350 230 305 185 305 175Z" fill="#1FC7CA"/>
<path d="M175 255C150 255 125 280 125 305C125 330 150 355 200 380C225 392.5 275 392.5 300 380C350 355 375 330 375 305C375 280 350 255 325 255C300 255 287.5 267.5 275 292.5C262.5 267.5 250 255 225 255C212.5 255 193.75 255 175 255Z" fill="#1FC7CA"/>
</svg>
</div>
<div class="header-actions">
<button class="header-btn">Web</button>
<button class="header-btn" id="logoutBtn" style="display: none;">Logout</button>
</div>
</div>

<!-- Login Modal (Inline) -->
<div id="login-modal" class="login-modal" style="display: none;">
<div class="login-modal-content">
<div class="login-modal-header">
<h2>Sign In</h2>
<p class="login-subtitle">Enter your credentials to continue</p>
</div>
<div class="login-form">
<div class="input-group">
<label for="email">Email</label>
<input type="email" id="email" placeholder="your@email.com" autocomplete="email" required />
</div>
<div class="input-group">
<label for="password">Password</label>
<input type="password" id="password" placeholder="••••••••" autocomplete="current-password" required />
</div>
<div id="error-message" class="error-message" style="display: none;"></div>
<button id="login-btn" class="btn-primary">
<span class="btn-text">Sign In</span>
<span class="btn-spinner" style="display: none;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</span>
</button>
</div>
</div>
</div>

<!-- Main Content (requires auth) -->
<div id="main-content" style="display: none;">

<!-- Paused Consultations Grid -->
<div id="paused-consultations" class="paused-consultations" style="display: none;">
<div class="paused-header">Paused Consultations</div>
<div class="paused-grid" id="pausedGrid">
<!-- Paused consultation cards will be inserted here -->
</div>
</div>

<!-- Ready State: Patient selected, ready to start -->
<div id="ready-state" class="state-view">
<div class="patient-info">
<div class="patient-name">Select a patient in EzyVet</div>
<div class="patient-details"></div>
</div>
<div class="start-section">
<button class="btn-start" id="startBtn">▶ Start Consult</button>
</div>
</div>

<!-- Recording State: Active recording with timer and waveform -->
<div id="recording-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="recording-badge">
<div class="recording-dot"></div>
<span>Recording</span>
</div>

<div class="timer" id="timer">00:00:00</div>

<div class="waveform">
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
</div>

<div class="controls">
<button class="btn-secondary" id="pauseBtn">⏸️ Pause</button>
</div>

<div class="section">
<div class="section-header">
<span>📷</span>
<span>Photos</span>
<span class="badge" id="photoCount">0</span>
</div>
<div class="photos-grid" id="photosGrid">
<div class="photo-box" id="addPhotoBtn">+</div>
</div>
<input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
</div>

<div class="section">
<div class="section-header">
<span>📋</span>
<span>Template</span>
<span style="margin-left: auto;">▼</span>
</div>
<div class="section-content">General Checkup</div>
</div>

<div class="submit-section">
<button class="btn-primary" id="submitBtn">✓ Submit</button>
</div>
</div>

<!-- Processing State: Generating summary -->
<div id="processing-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="processing-content">
<div class="processing-spinner">
<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#1FC7CA" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</div>
<div class="processing-text">Generating AI Summary...</div>
<div class="processing-subtext">This may take a few moments</div>
</div>
</div>

<!-- Completed State: Summary generated -->
<div id="completed-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="completed-badge">
<span>✓</span>
<span>Consultation Complete</span>
</div>

<div class="summary-section">
<div class="summary-header">
<span>📝</span>
<span>AI Summary</span>
</div>
<div class="summary-content" id="summaryContent">
<p><strong>Chief Complaint:</strong> Annual wellness checkup</p>
<p><strong>History:</strong> 3-year-old spayed female Labrador. No current medications. Up to date on vaccinations.</p>
<p><strong>Physical Exam:</strong> Alert and responsive. BCS 5/9. Heart rate 90 bpm, respiratory rate 24 bpm. No abnormalities detected.</p>
<p><strong>Assessment:</strong> Healthy adult dog. Continue current preventative care regimen.</p>
<p><strong>Plan:</strong> Return in 12 months for annual exam. Owner advised on dental care and nutrition.</p>
</div>
</div>

<div class="completed-actions">
<button class="btn-secondary" id="newConsultBtn">New Consult</button>
<button class="btn-primary" id="insertBtn">Insert into EzyVet</button>
</div>
</div>

</div>

</div>
<script src="config.js"></script>
<script src="auth/token-manager.js"></script>
<script src="auth/auth.js"></script>
<script src="api/api-client.js"></script>
<script src="api/consultation.service.js"></script>
<script src="api/recording.service.js"></script>
<script src="api/photo.service.js"></script>
<script src="recording/media-recorder.service.js"></script>
<script src="recording/recording-manager.js"></script>
<script src="sidebar.js"></script>
</body></html>
