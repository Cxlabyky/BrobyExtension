<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>BrobyVets</title><link rel="stylesheet" href="sidebar.css"></head>
<body>
<div id="brobyvets-sidebar">
<div class="sidebar-header">
<div class="logo">
<svg width="48" height="48" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<!-- Top Left Toe -->
<ellipse cx="170" cy="140" rx="55" ry="75" fill="#1FC7CA"/>
<!-- Top Right Toe -->
<ellipse cx="342" cy="140" rx="55" ry="75" fill="#1FC7CA"/>
<!-- Left Toe -->
<ellipse cx="100" cy="220" rx="50" ry="70" fill="#1FC7CA"/>
<!-- Right Toe -->
<ellipse cx="412" cy="220" rx="50" ry="70" fill="#1FC7CA"/>
<!-- Main Paw Pad -->
<path d="M 256 480 C 180 480 120 420 120 344 C 120 300 140 260 170 230 C 200 200 240 180 256 180 C 272 180 312 200 342 230 C 372 260 392 300 392 344 C 392 420 332 480 256 480 Z" fill="#1FC7CA"/>
<!-- Heart Shape Inside Paw -->
<path d="M 256 420 C 240 420 220 410 210 395 C 200 380 195 360 195 340 C 195 310 210 285 230 270 C 240 262 248 258 256 258 C 264 258 272 262 282 270 C 302 285 317 310 317 340 C 317 360 312 380 302 395 C 292 410 272 420 256 420 Z M 230 290 C 218 300 210 318 210 340 C 210 355 214 368 220 378 C 228 390 240 398 256 398 C 272 398 284 390 292 378 C 298 368 302 355 302 340 C 302 318 294 300 282 290 C 274 284 266 280 256 280 C 246 280 238 284 230 290 Z" fill="#FFFFFF"/>
</svg>
</div>
<div class="header-actions">
<button class="header-btn">Web</button>
<button class="header-btn" id="logoutBtn" style="display: none;">Logout</button>
</div>
</div>

<!-- Login Modal (Inline) -->
<div id="login-modal" class="login-modal" style="display: none;">
<div class="login-modal-content">
<div class="login-modal-header">
<h2>Sign In</h2>
<p class="login-subtitle">Enter your credentials to continue</p>
</div>
<div class="login-form">
<div class="input-group">
<label for="email">Email</label>
<input type="email" id="email" placeholder="your@email.com" autocomplete="email" required />
</div>
<div class="input-group">
<label for="password">Password</label>
<input type="password" id="password" placeholder="••••••••" autocomplete="current-password" required />
</div>
<div id="error-message" class="error-message" style="display: none;"></div>
<button id="login-btn" class="btn-primary">
<span class="btn-text">Sign In</span>
<span class="btn-spinner" style="display: none;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</span>
</button>
</div>
</div>
</div>

<!-- Main Content (requires auth) -->
<div id="main-content" style="display: none;">

<!-- Paused Consultations Grid -->
<div id="paused-consultations" class="paused-consultations" style="display: none;">
<div class="paused-header">Paused Consultations</div>
<div class="paused-grid" id="pausedGrid">
<!-- Paused consultation cards will be inserted here -->
</div>
</div>

<!-- Ready State: Patient selected, ready to start -->
<div id="ready-state" class="state-view">
<div class="patient-info">
<div class="patient-name">Select a patient in EzyVet</div>
<div class="patient-details"></div>
</div>
<div class="start-section">
<button class="btn-start" id="startBtn">▶ Start Consult</button>
</div>
</div>

<!-- Recording State: Active recording with timer and waveform -->
<div id="recording-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="recording-badge">
<div class="recording-dot"></div>
<span>Recording</span>
</div>

<div class="timer" id="timer">00:00:00</div>

<div class="waveform">
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
</div>

<div class="controls">
<button class="btn-secondary" id="pauseBtn">⏸️ Pause</button>
</div>

<div class="section">
<div class="section-header">
<span>📷</span>
<span>Photos</span>
<span class="badge" id="photoCount">0</span>
</div>
<div class="photos-grid" id="photosGrid">
<div class="photo-box" id="addPhotoBtn">+</div>
</div>
<input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
</div>

<div class="section">
<div class="section-header">
<span>📋</span>
<span>Template</span>
<span style="margin-left: auto;">▼</span>
</div>
<div class="section-content">General Checkup</div>
</div>

<div class="submit-section">
<button class="btn-primary" id="submitBtn">✓ Submit</button>
</div>
</div>

<!-- Processing State: Generating summary -->
<div id="processing-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="processing-content">
<div class="processing-spinner">
<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#1FC7CA" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</div>
<div class="processing-text">Generating AI Summary...</div>
<div class="processing-subtext">This may take a few moments</div>
</div>
</div>

<!-- Completed State: Summary generated -->
<div id="completed-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="completed-badge">
<span>✓</span>
<span>Consultation Complete</span>
</div>

<div class="summary-section">
<div class="summary-header">
<span>📝</span>
<span>AI Summary</span>
</div>
<div class="summary-content" id="summaryContent">
<p><strong>Chief Complaint:</strong> Annual wellness checkup</p>
<p><strong>History:</strong> 3-year-old spayed female Labrador. No current medications. Up to date on vaccinations.</p>
<p><strong>Physical Exam:</strong> Alert and responsive. BCS 5/9. Heart rate 90 bpm, respiratory rate 24 bpm. No abnormalities detected.</p>
<p><strong>Assessment:</strong> Healthy adult dog. Continue current preventative care regimen.</p>
<p><strong>Plan:</strong> Return in 12 months for annual exam. Owner advised on dental care and nutrition.</p>
</div>
</div>

<div class="completed-actions">
<button class="btn-secondary" id="newConsultBtn">New Consult</button>
<button class="btn-primary" id="insertBtn">Insert into EzyVet</button>
</div>
</div>

</div>

</div>
<script src="config.js"></script>
<script src="auth/token-manager.js"></script>
<script src="auth/auth.js"></script>
<script src="api/api-client.js"></script>
<script src="api/consultation.service.js"></script>
<script src="api/recording.service.js"></script>
<script src="api/photo.service.js"></script>
<script src="recording/media-recorder.service.js"></script>
<script src="recording/recording-manager.js"></script>
<script src="sidebar.js"></script>
</body></html>
