<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>BrobyVets</title><link rel="stylesheet" href="sidebar.css"></head>
<body>
<div id="brobyvets-sidebar">
<div class="sidebar-header">
<div class="logo"><svg width="32" height="32" viewBox="0 0 100 100"><path d="M20 35C20 25 25 20 35 20C38 20 40 22 40 25C40 28 38 30 35 30C30 30 30 30 30 35C30 40 30 40 35 40C38 40 40 42 40 45C40 48 38 50 35 50C25 50 20 45 20 35Z" fill="#1FC7CA"/><path d="M60 35C60 25 65 20 75 20C78 20 80 22 80 25C80 28 78 30 75 30C70 30 70 30 70 35C70 40 70 40 75 40C78 40 80 42 80 45C40 48 78 50 75 50C65 50 60 45 60 35Z" fill="#1FC7CA"/><path d="M35 55C30 55 25 60 25 65C25 70 30 75 40 80C45 82.5 55 82.5 60 80C70 75 75 70 75 65C75 60 70 55 65 55C60 55 57.5 57.5 55 62.5C52.5 57.5 50 55 45 55C42.5 55 38.75 55 35 55Z" fill="#1FC7CA"/></svg></div>
<div class="header-actions">
<button class="header-btn">Web</button>
<button class="header-btn" id="logoutBtn" style="display: none;">Logout</button>
</div>
</div>

<!-- Login Modal (Inline) -->
<div id="login-modal" class="login-modal" style="display: none;">
<div class="login-modal-content">
<div class="login-modal-header">
<h2>Sign In</h2>
<p class="login-subtitle">Enter your credentials to continue</p>
</div>
<div class="login-form">
<div class="input-group">
<label for="email">Email</label>
<input type="email" id="email" placeholder="your@email.com" autocomplete="email" required />
</div>
<div class="input-group">
<label for="password">Password</label>
<input type="password" id="password" placeholder="••••••••" autocomplete="current-password" required />
</div>
<div id="error-message" class="error-message" style="display: none;"></div>
<button id="login-btn" class="btn-primary">
<span class="btn-text">Sign In</span>
<span class="btn-spinner" style="display: none;">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</span>
</button>
</div>
</div>
</div>

<!-- Main Content (requires auth) -->
<div id="main-content" style="display: none;">

<!-- Ready State: Patient selected, ready to start -->
<div id="ready-state" class="state-view">
<div class="patient-info">
<div class="patient-name">Select a patient in EzyVet</div>
<div class="patient-details"></div>
</div>
<div class="start-section">
<button class="btn-start" id="startBtn">▶ Start Consult</button>
</div>
</div>

<!-- Recording State: Active recording with timer and waveform -->
<div id="recording-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="recording-badge">
<div class="recording-dot"></div>
<span>Recording</span>
</div>

<div class="timer" id="timer">00:00:00</div>

<div class="waveform">
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
</div>

<div class="controls">
<button class="btn-secondary" id="pauseBtn">⏸️ Pause</button>
<button class="btn-primary" id="submitBtn">✓ Submit</button>
</div>

<div class="section">
<div class="section-header">
<span>📷</span>
<span>Photos</span>
<span class="badge">0</span>
</div>
<div class="photos-grid">
<div class="photo-box">+</div>
</div>
</div>

<div class="section">
<div class="section-header">
<span>📋</span>
<span>Template</span>
<span style="margin-left: auto;">▼</span>
</div>
<div class="section-content">General Checkup</div>
</div>
</div>

<!-- Processing State: Generating summary -->
<div id="processing-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="processing-content">
<div class="processing-spinner">
<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#1FC7CA" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</div>
<div class="processing-text">Generating AI Summary...</div>
<div class="processing-subtext">This may take a few moments</div>
</div>
</div>

<!-- Completed State: Summary generated -->
<div id="completed-state" class="state-view" style="display: none;">
<div class="patient-info">
<div class="patient-name">Bunny</div>
<div class="patient-details">Dog • ID: 12345 • 23/10/2025</div>
</div>

<div class="completed-badge">
<span>✓</span>
<span>Consultation Complete</span>
</div>

<div class="summary-section">
<div class="summary-header">
<span>📝</span>
<span>AI Summary</span>
</div>
<div class="summary-content" id="summaryContent">
<p><strong>Chief Complaint:</strong> Annual wellness checkup</p>
<p><strong>History:</strong> 3-year-old spayed female Labrador. No current medications. Up to date on vaccinations.</p>
<p><strong>Physical Exam:</strong> Alert and responsive. BCS 5/9. Heart rate 90 bpm, respiratory rate 24 bpm. No abnormalities detected.</p>
<p><strong>Assessment:</strong> Healthy adult dog. Continue current preventative care regimen.</p>
<p><strong>Plan:</strong> Return in 12 months for annual exam. Owner advised on dental care and nutrition.</p>
</div>
</div>

<div class="completed-actions">
<button class="btn-secondary" id="newConsultBtn">New Consult</button>
<button class="btn-primary" id="insertBtn">Insert into EzyVet</button>
</div>
</div>

</div>

</div>
<script src="config.js"></script>
<script src="auth/token-manager.js"></script>
<script src="auth/auth.js"></script>
<script src="api/api-client.js"></script>
<script src="api/consultation.service.js"></script>
<script src="api/recording.service.js"></script>
<script src="recording/media-recorder.service.js"></script>
<script src="recording/recording-manager.js"></script>
<script src="sidebar.js"></script>
</body></html>
