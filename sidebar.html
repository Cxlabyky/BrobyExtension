<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>BrobyVets</title><link rel="stylesheet" href="sidebar.css"></head>
<body>
<div id="brobyvets-sidebar">

<!-- Header -->
<div class="sidebar-header">
<div class="logo" id="sidebarLogo" style="display:none">
<img src="icons/icon48.png" alt="Broby" />
</div>
<div class="header-actions">
<button class="header-btn">Web</button>
<button class="header-btn" id="logoutBtn" style="display:none">Logout</button>
</div>
</div>

<!-- Paused Consultations Grid -->
<div class="paused-consults" id="paused-consultations" style="display:none">
<div class="paused-consults-title">PAUSED CONSULTATIONS</div>
<div class="paused-grid" id="pausedGrid">
<!-- Dynamically populated -->
</div>
</div>

<!-- Login Modal -->
<div id="login-modal" class="login-modal">
<div class="login-modal-content">
<div class="login-modal-header">
<h2>Sign In</h2>
<p class="login-subtitle">Enter your credentials to continue</p>
</div>
<div class="input-group">
<label>Email</label>
<input type="email" id="email" placeholder="your@email.com" autocomplete="email" required />
</div>
<div class="input-group">
<label>Password</label>
<input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" required />
</div>
<div id="error-message" class="error-message" style="display:none"></div>
<button class="btn-start" id="login-btn">
<span class="btn-text">Sign In</span>
<span class="btn-spinner" style="display:none">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</span>
</button>
</div>
</div>

<!-- Main Content -->
<div id="main-content" style="display:none">

<!-- Ready State (Patient Info + Start Button) -->
<div id="ready-state" class="state-view">
<div class="patient-info">
<div class="patient-name" id="ready-patient-name">Select a patient in EzyVet</div>
<div class="patient-details" id="ready-patient-details"></div>
</div>
<button class="btn-start" id="startBtn">â–¶ Start Consult</button>
</div>

<!-- Recording State -->
<div id="recording-state" class="state-view" style="display:none">
<div class="patient-info">
<div class="patient-name" id="recording-patient-name">Bunny</div>
<div class="patient-details" id="recording-patient-details">Dog â€¢ ID: 12345 â€¢ 23/10/2025</div>
</div>
<div class="recording-badge">
<span class="recording-dot"></span>
<span id="recording-status">Recording</span>
</div>
<div class="timer" id="timer">00:00:01</div>
<div class="waveform" id="waveform">
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
<div class="waveform-bar"></div>
</div>
<button class="btn-secondary" id="pauseBtn">â¸ Pause</button>
<div class="section">
<div class="section-header">
<span>ğŸ“·</span>
<span>Photos</span>
<span class="badge" id="photoCount">0</span>
</div>
<div class="photos-grid" id="photosGrid">
<div class="photo-box" id="addPhotoBtn">+</div>
</div>
<input type="file" id="photoInput" accept="image/*" multiple style="display:none">
</div>
<div class="section">
<div class="section-header">
<span>ğŸ“‹</span>
<span>Template</span>
<span style="margin-left:auto">â–¼</span>
</div>
<div class="section-content">General Checkup</div>
</div>
<button class="btn-primary" id="submitBtn">âœ“ Submit</button>
</div>

<!-- Processing State -->
<div id="processing-state" class="state-view" style="display:none">
<div class="patient-info">
<div class="patient-name" id="processing-patient-name">Bunny</div>
<div class="patient-details" id="processing-patient-details">Dog â€¢ ID: 12345 â€¢ 23/10/2025</div>
</div>
<div class="processing-content">
<div class="processing-spinner">
<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#1FC7CA" stroke-width="2">
<circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
<path d="M12 2 A10 10 0 0 1 22 12" stroke-linecap="round">
<animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"/>
</path>
</svg>
</div>
<div class="processing-text">Generating AI Summary...</div>
<div class="processing-subtext">This may take a few moments</div>
</div>
</div>

<!-- Completed State -->
<div id="completed-state" class="state-view" style="display:none">
<div class="patient-info">
<div class="patient-name" id="completed-patient-name">Bunny</div>
<div class="patient-details" id="completed-patient-details">Dog â€¢ ID: 12345 â€¢ 23/10/2025</div>
</div>
<div class="completed-badge">
<span>âœ“</span>
<span>Consultation Complete</span>
</div>
<div class="summary-section">
<div class="summary-header">
<span>ğŸ“</span>
<span>AI Summary</span>
</div>
<div class="summary-content" id="summaryContent">
<p><strong>Chief Complaint:</strong> Annual wellness checkup</p>
<p><strong>History:</strong> 3-year-old spayed female Labrador. No current medications. Up to date on vaccinations.</p>
<p><strong>Physical Exam:</strong> Alert and responsive. BCS 5/9. Heart rate 90 bpm, respiratory rate 24 bpm. No abnormalities detected.</p>
<p><strong>Assessment:</strong> Healthy adult dog. Continue current preventative care regimen.</p>
<p><strong>Plan:</strong> Return in 12 months for annual exam. Owner advised on dental care and nutrition.</p>
</div>
</div>
<div class="completed-actions">
<button class="btn-secondary" id="newConsultBtn">New Consult</button>
<button class="btn-primary" id="insertBtn">Insert into EzyVet</button>
</div>
</div>

</div>
</div>

<script src="config.js"></script>
<script src="utils/retry.js"></script>
<script src="auth/token-manager.js"></script>
<script src="auth/auth.js"></script>
<script src="api/api-client.js"></script>
<script src="api/consultation.service.js"></script>
<script src="api/recording.service.js"></script>
<script src="api/photo.service.js"></script>
<script src="recording/media-recorder.service.js"></script>
<script src="recording/recording-manager.js"></script>
<script src="sidebar.js"></script>
</body>
</html>
